<%# locals: (post:, featured: false) %>
<article class="card p-6 hover:border-zinc-600 transition-colors group">
  <a href="/post/<%= post.to_param %>" class="block">
    <% if post.first_image.present? && featured %>
      <div class="mb-4 -mx-6 -mt-6">
        <img src="<%= post.first_image %>"
             alt="<%= post.display_title %>"
             class="w-full h-48 object-cover rounded-t-xl">
      </div>
    <% end %>

    <div class="flex items-start justify-between gap-4">
      <div class="flex-1">
        <h3 class="text-lg font-semibold group-hover:accent transition-colors mb-2">
          <%= post.display_title %>
        </h3>

        <p class="text-zinc-400 text-sm line-clamp-2 mb-3">
          <%= post.display_excerpt %>
        </p>

        <div class="flex items-center gap-4 text-xs text-zinc-500">
          <time datetime="<%= post.telegram_date.iso8601 %>">
            <%= post.telegram_date.strftime('%d.%m.%Y') %>
          </time>
          <span>·</span>
          <span><%= post.views_count %> просмотров</span>
          <% if post.featured? %>
            <span class="px-2 py-0.5 rounded-full bg-emerald-500/10 text-emerald-400 text-xs">
              Избранное
            </span>
          <% end %>
        </div>
      </div>

      <% if post.first_image.present? && !featured %>
        <div class="flex-shrink-0">
          <img src="<%= post.first_image %>"
               alt=""
               class="w-20 h-20 object-cover rounded-lg">
        </div>
      <% end %>
    </div>
  </a>
</article>
