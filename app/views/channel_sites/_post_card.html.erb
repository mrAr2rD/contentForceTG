<%# locals: (post:, featured: false) %>
<article class="card p-4 hover:border-zinc-600 transition-colors group">
  <a href="/post/<%= post.to_param %>" class="block">
    <% if post.first_image.present? && featured %>
      <div class="mb-3 -mx-4 -mt-4">
        <img src="<%= post.first_image %>"
             alt="<%= post.display_title %>"
             class="w-full h-36 object-cover rounded-t-xl">
      </div>
    <% end %>

    <div class="flex items-start justify-between gap-3">
      <div class="flex-1 min-w-0">
        <h3 class="text-base font-semibold group-hover:accent transition-colors mb-1.5 line-clamp-2">
          <%= post.display_title %>
        </h3>

        <p class="text-zinc-400 text-sm line-clamp-2 mb-2">
          <%= post.display_excerpt %>
        </p>

        <div class="flex items-center gap-2 text-xs text-zinc-500">
          <time datetime="<%= post.telegram_date.iso8601 %>">
            <%= post.telegram_date.strftime('%d.%m.%Y') %>
          </time>
          <span class="w-1 h-1 rounded-full bg-zinc-600"></span>
          <span><%= post.views_count %> просм.</span>
          <% if post.featured? %>
            <span class="px-1.5 py-0.5 rounded bg-emerald-500/10 text-emerald-400 text-xs">
              ★
            </span>
          <% end %>
        </div>
      </div>

      <% if post.first_image.present? && !featured %>
        <div class="flex-shrink-0">
          <img src="<%= post.first_image %>"
               alt=""
               class="w-16 h-16 object-cover rounded-lg">
        </div>
      <% end %>
    </div>
  </a>
</article>
