<%= form_with model: [:admin, template], class: "space-y-6" do |f| %>
  <% if template.errors.any? %>
    <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4">
      <ul class="list-disc list-inside text-sm text-red-600 dark:text-red-400">
        <% template.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-6 space-y-6">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <%= f.label :event_type, 'Тип события', class: "block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1" %>
        <%= f.select :event_type, Notification::TYPES.map { |t| [t.humanize, t] }, {}, class: "w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-50" %>
      </div>

      <div>
        <%= f.label :channel, 'Канал', class: "block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1" %>
        <%= f.select :channel, [['Email', 'email'], ['Telegram', 'telegram']], {}, class: "w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-50" %>
      </div>
    </div>

    <div>
      <%= f.label :subject, 'Тема (для email)', class: "block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1" %>
      <%= f.text_field :subject, class: "w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-50", placeholder: "Тема письма..." %>
    </div>

    <div>
      <%= f.label :body_template, 'Шаблон сообщения', class: "block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1" %>
      <%= f.text_area :body_template, rows: 10, class: "w-full px-3 py-2 border border-zinc-300 dark:border-zinc-700 rounded-lg bg-white dark:bg-zinc-900 text-zinc-900 dark:text-zinc-50 font-mono text-sm", placeholder: "Текст сообщения с переменными {{variable}}..." %>
      <p class="mt-2 text-xs text-zinc-500 dark:text-zinc-400">
        Доступные переменные: {{user_name}}, {{user_email}}, {{plan_name}}, {{amount}}, {{expires_at}}, {{error_message}}, {{channel_name}}
      </p>
    </div>

    <div class="flex items-center gap-2">
      <%= f.check_box :active, class: "w-4 h-4 rounded border-zinc-300 dark:border-zinc-700 text-primary-600" %>
      <%= f.label :active, 'Активен (уведомления отправляются)', class: "text-sm text-zinc-700 dark:text-zinc-300" %>
    </div>
  </div>

  <div class="flex items-center gap-4">
    <%= f.submit template.persisted? ? 'Сохранить' : 'Создать', class: "px-6 py-2 bg-primary-600 text-white rounded-lg text-sm font-medium hover:bg-primary-700 transition-colors cursor-pointer" %>
    <%= link_to 'Отмена', admin_notification_templates_path, class: "px-6 py-2 border border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 rounded-lg text-sm font-medium hover:bg-zinc-50 dark:hover:bg-zinc-900 transition-colors" %>
  </div>
<% end %>
