<div class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-3xl font-bold text-zinc-900 dark:text-zinc-50">Invite Links</h2>
      <p class="mt-2 text-zinc-600 dark:text-zinc-400">Управление пригласительными ссылками Telegram</p>
    </div>
  </div>

  <!-- Статистика -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
    <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4">
      <div class="text-sm text-zinc-500 dark:text-zinc-400">Всего ссылок</div>
      <div class="text-2xl font-bold text-zinc-900 dark:text-zinc-50"><%= @stats[:total] %></div>
    </div>
    <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4">
      <div class="text-sm text-zinc-500 dark:text-zinc-400">Активных</div>
      <div class="text-2xl font-bold text-green-600 dark:text-green-400"><%= @stats[:active] %></div>
    </div>
    <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4">
      <div class="text-sm text-zinc-500 dark:text-zinc-400">Отозвано</div>
      <div class="text-2xl font-bold text-red-600 dark:text-red-400"><%= @stats[:revoked] %></div>
    </div>
    <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-4">
      <div class="text-sm text-zinc-500 dark:text-zinc-400">Всего вступлений</div>
      <div class="text-2xl font-bold text-primary-600 dark:text-primary-400"><%= @stats[:total_joins] %></div>
    </div>
  </div>

  <div class="bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg overflow-hidden">
    <table class="min-w-full divide-y divide-zinc-200 dark:divide-zinc-800">
      <thead class="bg-zinc-50 dark:bg-zinc-900">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Ссылка</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Канал</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Источник</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Вступления</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Статус</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Создана</th>
          <th class="px-6 py-3 text-right text-xs font-medium text-zinc-500 dark:text-zinc-400 uppercase tracking-wider">Действия</th>
        </tr>
      </thead>
      <tbody class="bg-white dark:bg-zinc-950 divide-y divide-zinc-200 dark:divide-zinc-800">
        <% @invite_links.each do |link| %>
          <tr class="hover:bg-zinc-50 dark:hover:bg-zinc-900/50">
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-sm font-mono text-zinc-900 dark:text-zinc-50 truncate max-w-xs" title="<%= link.invite_link %>">
                <%= truncate(link.invite_link, length: 40) %>
              </div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-sm text-zinc-900 dark:text-zinc-50"><%= link.channel_name || 'N/A' %></div>
              <div class="text-xs text-zinc-500 dark:text-zinc-400"><%= link.telegram_bot&.project&.name %></div>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-zinc-500 dark:text-zinc-400">
              <%= link.source || '—' %>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <div class="text-sm font-medium text-zinc-900 dark:text-zinc-50"><%= link.join_count %></div>
              <% if link.member_limit %>
                <div class="text-xs text-zinc-500 dark:text-zinc-400">из <%= link.member_limit %></div>
              <% end %>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">
              <% if link.revoked? %>
                <span class="px-2 py-1 text-xs font-medium rounded bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-400">Отозвана</span>
              <% elsif link.expired? %>
                <span class="px-2 py-1 text-xs font-medium rounded bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-400">Истекла</span>
              <% elsif link.limit_reached? %>
                <span class="px-2 py-1 text-xs font-medium rounded bg-orange-100 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400">Лимит</span>
              <% else %>
                <span class="px-2 py-1 text-xs font-medium rounded bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-400">Активна</span>
              <% end %>
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-sm text-zinc-500 dark:text-zinc-400">
              <%= time_ago_in_words(link.created_at) %> назад
            </td>
            <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2">
              <%= link_to "View", admin_invite_link_path(link), class: "text-primary-600 dark:text-primary-400 hover:underline" %>
              <%= link_to "Delete", admin_invite_link_path(link), method: :delete, data: { confirm: "Удалить ссылку?" }, class: "text-red-600 dark:text-red-400 hover:underline" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <% if @invite_links.respond_to?(:total_pages) && @invite_links.total_pages > 1 %>
    <div class="flex justify-center">
      <%= paginate @invite_links %>
    </div>
  <% end %>
</div>
