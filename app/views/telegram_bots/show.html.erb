<div class="max-w-7xl mx-auto px-8 py-8">
  <!-- Header -->
  <div class="mb-6">
    <%= link_to project_path(@project), class: "inline-flex items-center gap-2 text-xs text-slate-500 hover:text-slate-900 mb-3 transition-colors" do %>
      <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
      Назад к проекту
    <% end %>

    <div class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-slate-100 rounded flex items-center justify-center">
          <svg class="w-5 h-5 text-slate-600" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18.717-.962 3.767-1.362 5.001-.168.52-.504.694-.826.71-.702.033-1.235-.464-1.913-.908-1.061-.695-1.662-1.127-2.693-1.805-.119-.078-.238-.158-.356-.239a.734.734 0 01.05-1.171c.294-.24 2.661-2.426 2.661-2.426s.172-.177.161-.284a.316.316 0 00-.189-.238 1.02 1.02 0 00-.373-.05c-.177.011-2.986 1.897-8.428 5.571-.797.548-1.52.815-2.165.801-.713-.016-2.082-.403-3.104-.736-.125-.041-.247-.081-.364-.121a.722.722 0 01-.437-.873c.056-.148.146-.258.256-.354.851-.748 8.666-3.758 10.818-4.677 5.112-2.186 6.184-2.568 6.876-2.58.153-.002.495.035.716.214.186.149.238.351.263.494.024.143.056.466.032.72z"/>
          </svg>
        </div>
        <div>
          <h1 class="text-xl font-semibold text-slate-900">@<%= @telegram_bot.bot_username %></h1>
          <p class="text-xs text-slate-500"><%= @telegram_bot.channel_name.presence || @telegram_bot.channel_id %></p>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <% if @telegram_bot.verified? %>
          <span class="px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded">Подключен</span>
        <% else %>
          <%= button_to verify_project_telegram_bot_path(@project, @telegram_bot), method: :post, class: "px-3 py-1.5 bg-yellow-50 text-yellow-700 rounded text-xs font-medium hover:bg-yellow-100 transition-colors" do %>
            Проверить
          <% end %>
        <% end %>
        <%= link_to edit_project_telegram_bot_path(@project, @telegram_bot), class: "px-3 py-1.5 border border-[#e9e9e6] text-slate-700 rounded text-xs font-medium hover:bg-[#f7f6f3] transition-colors" do %>
          Редактировать
        <% end %>
      </div>
    </div>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
    <!-- Main -->
    <div class="lg:col-span-2 space-y-4">
      <!-- Status -->
      <div class="bg-white border border-[#e9e9e6] rounded">
        <div class="p-4 border-b border-[#e9e9e6]">
          <h2 class="text-sm font-semibold text-slate-900">Статус подключения</h2>
        </div>
        <div class="p-4">
          <div class="flex items-center gap-3 p-3 rounded <%= @telegram_bot.verified? ? 'bg-green-50 border border-green-200' : 'bg-yellow-50 border border-yellow-200' %>">
            <% if @telegram_bot.verified? %>
              <div class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div>
                <p class="text-xs font-medium text-green-900">Бот активен</p>
                <p class="text-xs text-green-700">Верифицирован <%= @telegram_bot.verified_at&.strftime("%d.%m.%Y %H:%M") %></p>
              </div>
            <% else %>
              <div class="w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center">
                <svg class="w-4 h-4 text-yellow-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
                </svg>
              </div>
              <div>
                <p class="text-xs font-medium text-yellow-900">Требуется верификация</p>
                <p class="text-xs text-yellow-700">Нажмите "Проверить подключение"</p>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Recent Posts -->
      <div class="bg-white border border-[#e9e9e6] rounded">
        <div class="p-4 border-b border-[#e9e9e6]">
          <h2 class="text-sm font-semibold text-slate-900">Опубликованные посты</h2>
        </div>
        
        <% posts = @telegram_bot.posts.order(created_at: :desc).limit(5) %>
        <% if posts.any? %>
          <div class="divide-y divide-[#e9e9e6]">
            <% posts.each do |post| %>
              <%= link_to post_path(post), class: "flex items-center gap-3 p-4 hover:bg-[#f7f6f3] transition-colors" do %>
                <div class="flex-1 min-w-0">
                  <p class="text-sm font-medium text-slate-900 truncate"><%= post.title %></p>
                  <p class="text-xs text-slate-500"><%= post.published_at&.strftime("%d.%m.%Y %H:%M") || "Не опубликован" %></p>
                </div>
                <span class="px-2 py-0.5 text-xs font-medium rounded <%= post.published? ? 'bg-green-50 text-green-700' : 'bg-slate-100 text-slate-600' %>">
                  <%= post.published? ? 'Опубликован' : post.status.capitalize %>
                </span>
              <% end %>
            <% end %>
          </div>
        <% else %>
          <div class="p-8 text-center">
            <p class="text-xs text-slate-500">Нет опубликованных постов</p>
          </div>
        <% end %>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="space-y-4">
      <div class="bg-white border border-[#e9e9e6] rounded">
        <div class="p-4 border-b border-[#e9e9e6]">
          <h3 class="text-xs font-semibold text-slate-900">Информация</h3>
        </div>
        <div class="p-4 space-y-3 text-xs">
          <div class="flex items-center justify-between">
            <span class="text-slate-500">Канал</span>
            <span class="text-slate-900 font-medium"><%= @telegram_bot.channel_id %></span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-slate-500">Постов</span>
            <span class="text-slate-900 font-medium"><%= @telegram_bot.posts.count %></span>
          </div>
          <div class="flex items-center justify-between">
            <span class="text-slate-500">Добавлен</span>
            <span class="text-slate-900"><%= @telegram_bot.created_at.strftime("%d.%m.%Y") %></span>
          </div>
        </div>
      </div>

      <div class="bg-white border border-[#e9e9e6] rounded">
        <div class="p-4 border-b border-[#e9e9e6]">
          <h3 class="text-xs font-semibold text-slate-900">Действия</h3>
        </div>
        <div class="p-4">
          <%= button_to project_telegram_bot_path(@project, @telegram_bot), method: :delete, data: { turbo_confirm: "Удалить бота?" }, class: "w-full py-2 text-xs font-medium text-red-600 hover:bg-red-50 rounded transition-colors text-left px-2" do %>
            Удалить бота
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
