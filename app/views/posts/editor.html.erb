<div data-controller="post-editor chat"
     data-chat-project-id-value="<%= @project&.id %>"
     data-chat-ai-model-value="<%= @project&.ai_model || 'anthropic/claude-3.5-sonnet' %>"
     data-post-editor-bots-value="<%= @telegram_bots.map { |bot| { id: bot.id, channel_name: bot.channel_name || bot.bot_username } }.to_json %>"
     class="h-screen flex flex-col bg-white dark:bg-zinc-950">
  <!-- Header - Notion style -->
  <header class="h-14 border-b border-zinc-200 dark:border-zinc-800 px-6 flex items-center justify-between bg-white dark:bg-zinc-950">
    <div class="flex items-center gap-4">
      <%= link_to posts_path, class: "p-2 text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md transition-colors" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
        </svg>
      <% end %>
      <div class="flex items-center gap-2">
        <svg class="w-5 h-5 text-primary-600 dark:text-primary-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
        <h1 class="text-base font-semibold text-zinc-900 dark:text-zinc-50">AI –†–µ–¥–∞–∫—Ç–æ—Ä</h1>
      </div>
    </div>

    <div class="flex items-center gap-2">
      <!-- Theme Toggle -->
      <button
        data-action="click->theme#toggle"
        class="p-2 rounded-md text-zinc-600 hover:text-zinc-900 hover:bg-zinc-100 dark:text-zinc-400 dark:hover:text-zinc-50 dark:hover:bg-zinc-800 transition-colors"
        title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"
      >
        <!-- Sun icon (visible in dark mode) -->
        <svg class="w-4 h-4 hidden dark:block" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
        </svg>
        <!-- Moon icon (visible in light mode) -->
        <svg class="w-4 h-4 block dark:hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
        </svg>
      </button>

      <% if @post.persisted? %>
        <%= link_to @post, class: "inline-flex items-center gap-2 px-3 py-1.5 text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-md transition-colors" do %>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
          </svg>
          –ü—Ä–æ—Å–º–æ—Ç—Ä
        <% end %>
      <% end %>
      <button
        data-action="click->post-editor#save"
        class="inline-flex items-center gap-2 px-4 py-1.5 bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90 rounded-md text-sm font-medium transition-colors shadow-sm"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"/>
        </svg>
        –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
      </button>
    </div>
  </header>

  <!-- Three Panel Layout - Notion style -->
  <div class="flex-1 flex overflow-hidden">
    <!-- Left Panel: AI Chat (30%) -->
    <aside class="w-[30%] bg-zinc-50 dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 flex flex-col">
      <div class="px-6 py-4 border-b border-zinc-200 dark:border-zinc-800">
        <h2 class="text-sm font-semibold text-zinc-900 dark:text-zinc-50 flex items-center gap-2">
          <div class="w-6 h-6 bg-gradient-to-br from-primary-500 to-primary-600 rounded-md flex items-center justify-center">
            <svg class="w-3.5 h-3.5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          AI –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç
        </h2>
      </div>
      
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Chat Messages -->
        <div data-chat-target="messages" class="flex-1 overflow-y-auto notion-scrollbar px-6 py-4 space-y-4">
          <div class="bg-primary-50 dark:bg-primary-900/30 border border-primary-200 dark:border-primary-700 rounded-lg p-4">
            <p class="text-sm text-primary-900 dark:text-primary-50 font-medium mb-2">üëã –ü—Ä–∏–≤–µ—Ç! –Ø –ø–æ–º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç.</p>
            <p class="text-sm text-primary-800 dark:text-primary-100">–ù–∞–ø–∏—à–∏ —Ç–µ–º—É –∏–ª–∏ –∏–¥–µ—é, –∏ —è —Å–≥–µ–Ω–µ—Ä–∏—Ä—É—é —Ç–µ–∫—Å—Ç –¥–ª—è Telegram.</p>
          </div>
        </div>
        
        <!-- Chat Input -->
        <div class="px-6 py-4 border-t border-zinc-200 dark:border-zinc-800">
          <form data-action="submit->chat#sendMessage" class="flex gap-2">
            <input 
              type="text" 
              data-chat-target="input"
              placeholder="–ù–∞–ø–∏—à–∏ —Ç–µ–º—É –ø–æ—Å—Ç–∞..."
              class="flex-1 h-10 px-3 py-2 border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 rounded-md text-sm text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-950 dark:focus:ring-zinc-300 focus:ring-offset-2 dark:ring-offset-zinc-950 transition-shadow"
            >
            <button
              type="submit"
              data-chat-target="submitButton"
              class="inline-flex items-center justify-center h-10 px-4 bg-zinc-900 text-zinc-50 hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90 rounded-md text-sm font-medium transition-colors"
            >
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
              </svg>
            </button>
          </form>
        </div>
      </div>
    </aside>

    <!-- Center Panel: Settings (20%) -->
    <aside class="w-[20%] bg-white dark:bg-zinc-950 border-r border-zinc-200 dark:border-zinc-800 overflow-y-auto notion-scrollbar">
      <div class="px-6 py-4 border-b border-zinc-200 dark:border-zinc-800">
        <h2 class="text-sm font-semibold text-zinc-900 dark:text-zinc-50">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
      </div>
      
      <%= form_with model: @post, url: @post.persisted? ? post_path(@post) : posts_path, method: @post.persisted? ? :patch : :post, local: true, data: { post_editor_target: "form" }, class: "px-6 py-4 space-y-6" do |f| %>
        <!-- Project -->
        <div>
          <%= f.label :project_id, "–ü—Ä–æ–µ–∫—Ç", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
          <%= f.collection_select :project_id, current_user.projects.active, :id, :name, 
              { prompt: "–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç" }, 
              { class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow" } %>
        </div>

        <!-- Telegram Bot -->
        <div>
          <%= f.label :telegram_bot_id, "Telegram –ë–æ—Ç", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
          <%= f.collection_select :telegram_bot_id, @telegram_bots, :id, :display_name,
              { include_blank: "–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞" },
              {
                data: {
                  post_editor_target: "botSelect",
                  action: "change->post-editor#updateChannelName"
                },
                class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow"
              } %>
        </div>

        <!-- Title -->
        <div>
          <%= f.label :title, "–ó–∞–≥–æ–ª–æ–≤–æ–∫", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
          <%= f.text_field :title,
              placeholder: "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–∞",
              class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow" %>
        </div>

        <!-- Post Type -->
        <div>
          <%= f.label :post_type, "–¢–∏–ø –ø–æ—Å—Ç–∞", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
          <%= f.select :post_type,
              [
                ['–¢–µ–∫—Å—Ç–æ–≤—ã–π', 'text'],
                ['–° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º', 'image'],
                ['–° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏ –∫–Ω–æ–ø–∫–æ–π', 'image_button']
              ],
              {},
              {
                data: {
                  post_editor_target: "postType",
                  action: "change->post-editor#toggleButtonFields"
                },
                class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow"
              } %>
        </div>

        <!-- Image Upload (show for image and image_button types) -->
        <div data-post-editor-target="imageField" class="<%= @post.post_type == 'text' ? 'hidden' : '' %>">
          <%= f.label :image, "–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
          <div class="flex items-center gap-2">
            <%= f.file_field :image,
                accept: "image/*",
                data: {
                  action: "change->post-editor#previewImage"
                },
                class: "block w-full text-sm text-zinc-900 dark:text-zinc-50 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-zinc-100 dark:file:bg-zinc-800 file:text-zinc-900 dark:file:text-zinc-50 hover:file:bg-zinc-200 dark:hover:file:bg-zinc-700 transition-colors cursor-pointer" %>
          </div>
          <% if @post.image.attached? %>
            <div class="mt-2 relative">
              <%= image_tag @post.image, class: "w-full rounded-md max-h-48 object-cover" %>
              <%= link_to "–£–¥–∞–ª–∏—Ç—å", "#",
                  data: { action: "click->post-editor#removeImage" },
                  class: "absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-md text-xs hover:bg-red-600 transition-colors" %>
            </div>
          <% end %>
        </div>

        <!-- Button Fields (show only for image_button type) -->
        <div data-post-editor-target="buttonFields" class="space-y-4 <%= @post.post_type == 'image_button' ? '' : 'hidden' %>">
          <div>
            <%= f.label :button_text, "–¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
            <%= f.text_field :button_text,
                placeholder: "–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç",
                maxlength: 64,
                data: { action: "input->post-editor#updateButtonText" },
                class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow" %>
            <p class="mt-1 text-xs text-zinc-500 dark:text-zinc-400">–ú–∞–∫—Å–∏–º—É–º 64 —Å–∏–º–≤–æ–ª–∞</p>
          </div>

          <div>
            <%= f.label :button_url, "–°—Å—ã–ª–∫–∞ –∫–Ω–æ–ø–∫–∏", class: "block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-2" %>
            <%= f.url_field :button_url,
                placeholder: "https://example.com",
                data: { action: "input->post-editor#updateButtonUrl" },
                class: "flex h-10 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-3 py-2 text-sm text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-500 dark:placeholder:text-zinc-400 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow font-mono" %>
            <p class="mt-1 text-xs text-zinc-500 dark:text-zinc-400">–ü–æ–ª–Ω—ã–π URL —Å https://</p>
          </div>
        </div>

        <!-- AI Settings Section -->
        <% if @project %>
          <div class="pt-4 border-t border-zinc-200 dark:border-zinc-800">
            <h3 class="text-xs font-semibold text-zinc-900 dark:text-zinc-50 mb-3 flex items-center gap-1">
              <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
              AI –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </h3>

            <!-- AI Model -->
            <div class="mb-4">
              <label class="block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1.5">–ú–æ–¥–µ–ª—å AI</label>
              <select data-chat-target="modelSelect"
                      data-action="change->chat#changeModel"
                      class="flex h-9 w-full rounded-md border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 px-2 py-1.5 text-xs text-zinc-900 dark:text-zinc-50 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 transition-shadow">
                <% Project::AI_MODELS.each do |value, label| %>
                  <option value="<%= value %>" <%= 'selected' if @project.ai_model == value %>>
                    <%= label %>
                  </option>
                <% end %>
              </select>
            </div>

            <!-- Writing Style -->
            <div>
              <label class="block text-xs font-medium text-zinc-700 dark:text-zinc-300 mb-1.5">–°—Ç–∏–ª—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è</label>
              <p class="text-xs text-zinc-500 dark:text-zinc-400 mb-2">
                <%= @project.writing_style_name %>
              </p>
              <%= link_to "–ò–∑–º–µ–Ω–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö", edit_project_path(@project),
                  class: "text-xs text-primary-600 dark:text-primary-400 hover:underline",
                  target: "_blank" %>
            </div>
          </div>
        <% end %>

        <!-- Hidden fields -->
        <%= f.hidden_field :content, data: { post_editor_target: "content" } %>
      <% end %>
    </aside>

    <!-- Right Panel: Preview & Editor (50%) -->
    <main class="flex-1 bg-white dark:bg-zinc-950 overflow-y-auto notion-scrollbar">
      <div class="max-w-3xl mx-auto px-12 py-8">
        <!-- Preview Header -->
        <div class="mb-6 flex items-center justify-between">
          <h2 class="text-base font-semibold text-zinc-900 dark:text-zinc-50">–ü—Ä–µ–≤—å—é –ø–æ—Å—Ç–∞</h2>
          <div class="flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400">
            <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
            –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
          </div>
        </div>

        <!-- Telegram Preview Card - Real Telegram Style -->
        <div class="mb-8 rounded-2xl border border-zinc-200 dark:border-zinc-700 overflow-hidden shadow-lg hover:shadow-xl transition-shadow bg-white dark:bg-zinc-900">
          <!-- Channel Header (–∫–∞–∫ –≤ Telegram) -->
          <div class="bg-white dark:bg-zinc-900 px-4 py-3 border-b border-zinc-100 dark:border-zinc-800">
            <div class="flex items-center gap-3">
              <div class="w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18.717-.962 3.767-1.362 5.001-.168.52-.504.694-.826.71-.702.033-1.235-.464-1.913-.908-1.061-.695-1.662-1.127-2.693-1.805-.119-.078-.238-.158-.356-.239a.734.734 0 01.05-1.171c.294-.24 2.661-2.426 2.661-2.426s.172-.177.161-.284a.316.316 0 00-.189-.238 1.02 1.02 0 00-.373-.05c-.177.011-2.986 1.897-8.428 5.571-.797.548-1.52.815-2.165.801-.713-.016-2.082-.403-3.104-.736-.125-.041-.247-.081-.364-.121a.722.722 0 01-.437-.873c.056-.148.146-.258.256-.354.851-.748 8.666-3.758 10.818-4.677 5.112-2.186 6.184-2.568 6.876-2.58.153-.002.495.035.716.214.186.149.238.351.263.494.024.143.056.466.032.72z"/>
                </svg>
              </div>
              <div class="flex-1 min-w-0">
                <p data-post-editor-target="channelName" class="text-zinc-900 dark:text-zinc-50 font-semibold text-sm truncate">
                  <%= @post.telegram_bot&.channel_name || @telegram_bots.first&.channel_name || "–í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞" %>
                </p>
                <p class="text-zinc-500 dark:text-zinc-400 text-xs"><%= Time.current.strftime("%H:%M") %></p>
              </div>
            </div>
          </div>

          <!-- Post Image (–µ—Å–ª–∏ –µ—Å—Ç—å) -->
          <div data-post-editor-target="imagePreview" class="<%= @post.image.attached? ? '' : 'hidden' %>">
            <% if @post.image.attached? %>
              <%= image_tag @post.image, alt: "Post image", class: "w-full object-cover max-h-96" %>
            <% else %>
              <img src="" alt="Post image" class="w-full object-cover max-h-96" data-post-editor-target="imagePreviewImg" />
            <% end %>
          </div>

          <!-- Post Content: Title + Text (–∫–∞–∫ –≤ Telegram) -->
          <div class="bg-white dark:bg-zinc-900 px-4 py-4">
            <!-- Title (–∂–∏—Ä–Ω—ã–π, –∫–∞–∫ –≤ Telegram) -->
            <h3 data-post-editor-target="titlePreview" class="text-base font-bold text-zinc-900 dark:text-zinc-50 mb-3 <%= @post.title.present? ? '' : 'hidden' %>"><%= @post.title %></h3>

            <!-- Content with Rich Telegram Formatting -->
            <div data-post-editor-target="preview" class="telegram-content text-[15px] text-zinc-900 dark:text-zinc-50 leading-relaxed space-y-3" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
              <% if @post.content.present? %>
                <%= simple_format(@post.content, class: '') %>
              <% else %>
                <p class="text-zinc-400 dark:text-zinc-500 italic">
                  –ù–∞—á–Ω–∏—Ç–µ –ø–∏—Å–∞—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...
                </p>
              <% end %>
            </div>

            <!-- Button (–¥–ª—è —Ç–∏–ø–∞ image_button) -->
            <div data-post-editor-target="buttonPreview" class="mt-4 <%= @post.post_type == 'image_button' && @post.button_text.present? ? '' : 'hidden' %>">
              <a href="<%= @post.button_url %>" target="_blank"
                 class="inline-flex items-center justify-center w-full px-4 py-2.5 bg-blue-500 hover:bg-blue-600 text-white font-medium rounded-md transition-colors text-sm">
                <span data-post-editor-target="buttonTextPreview"><%= @post.button_text || '–ö–Ω–æ–ø–∫–∞' %></span>
              </a>
            </div>
          </div>

          <!-- Post Meta (views, reactions, forwards) -->
          <div class="bg-white dark:bg-zinc-900 px-4 py-2.5 border-t border-zinc-100 dark:border-zinc-800">
            <div class="flex items-center justify-between text-[13px]">
              <div class="flex items-center gap-4 text-zinc-500 dark:text-zinc-400">
                <span class="flex items-center gap-1.5">
                  <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
                  </svg>
                  1.2k
                </span>
                <span class="flex items-center gap-1.5">
                  <svg class="w-[18px] h-[18px]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"/>
                  </svg>
                  72
                </span>
              </div>
              <span data-post-editor-target="charCount" class="font-medium tabular-nums text-zinc-500 dark:text-zinc-400">0 / 4096 —Å–∏–º–≤–æ–ª–æ–≤</span>
            </div>
          </div>
        </div>

        <!-- Content Editor - Notion style -->
        <div class="mb-8">
          <label class="block text-sm font-medium text-zinc-900 dark:text-zinc-50 mb-3">
            –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å—Ç–∞
          </label>
          <div class="rounded-lg border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 focus-within:ring-2 focus-within:ring-zinc-950 dark:focus-within:ring-zinc-300 focus-within:ring-offset-2 dark:ring-offset-zinc-950 transition-shadow">
            <textarea 
              data-post-editor-target="contentEditor"
              data-action="input->post-editor#updatePreview"
              rows="16"
              placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –ø–æ—Å—Ç–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ AI –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è Markdown:
**–∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç**
*–∫—É—Ä—Å–∏–≤*
`–∫–æ–¥`
[—Å—Å—ã–ª–∫–∞](https://example.com)"
              class="w-full px-6 py-4 bg-transparent text-sm text-zinc-900 dark:text-zinc-50 placeholder:text-zinc-400 dark:placeholder:text-zinc-600 focus:outline-none resize-none font-mono leading-relaxed"
            ><%= @post.content %></textarea>
          </div>
          <p class="mt-2 text-xs text-zinc-500 dark:text-zinc-400">
            –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Markdown –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
          </p>
        </div>

        <!-- Quick Actions - Notion style -->
        <div class="flex flex-wrap gap-2">
          <button
            type="button"
            data-action="click->post-editor#addEmoji"
            class="inline-flex items-center gap-2 px-3 py-1.5 border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 hover:bg-zinc-50 dark:hover:bg-zinc-900 rounded-md text-xs font-medium text-zinc-700 dark:text-zinc-300 transition-colors"
          >
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            –î–æ–±–∞–≤–∏—Ç—å —ç–º–æ–¥–∑–∏
          </button>
          <button
            type="button"
            data-action="click->post-editor#addHashtags"
            class="inline-flex items-center gap-2 px-3 py-1.5 border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 hover:bg-zinc-50 dark:hover:bg-zinc-900 rounded-md text-xs font-medium text-zinc-700 dark:text-zinc-300 transition-colors"
          >
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"/>
            </svg>
            –î–æ–±–∞–≤–∏—Ç—å —Ö–µ—à—Ç–µ–≥–∏
          </button>
          <button
            type="button"
            data-action="click->post-editor#triggerImageUpload"
            class="inline-flex items-center gap-2 px-3 py-1.5 border border-zinc-200 dark:border-zinc-800 bg-white dark:bg-zinc-950 hover:bg-zinc-50 dark:hover:bg-zinc-900 rounded-md text-xs font-medium text-zinc-700 dark:text-zinc-300 transition-colors"
          >
            <svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
            </svg>
            –î–æ–±–∞–≤–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
          </button>
        </div>
      </div>
    </main>
  </div>
</div>
